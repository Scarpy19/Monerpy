---
import Logout from "@comps/svgs/mono/Logout.astro";
import Login from "@comps/svgs/mono/Login.astro";
import Layout from "@layouts/Layout.astro";
import Home from "@comps/svgs/mono/Home.astro";
import CSRFToken from "@comps/CSRFToken.astro";

// Check if user is authenticated via the new middleware system
const user = Astro.locals.user;
---

<Layout
	title="Welcome"
	description="Your personal finance management tool"
	classes="h-screen bg-gray-900 p-8 mx-auto flex flex-col justify-center"
	showFooter={false}
	includeLogout={user !== null}
>
	<h1 class="text-3xl text-gray-100 font-bold text-center mb-2">
		Welcome to Monerpy
	</h1>

	<p class="text-center text-gray-400 mb-5">
		Your personal finance management tool.
	</p>

	<div class="flex justify-center gap-6">
		<a
			href="/dashboard"
			class="bg-purple-600 text-white px-6 py-3 rounded hover:bg-purple-700 transition duration-200 font-bold flex items-center gap-2"
		>
			<Home /> Dashboard
		</a>
		{
			!user ? (
				<a
					href="/login"
					class="bg-purple-600 text-white px-6 py-3 rounded hover:bg-purple-700 transition duration-200 font-bold flex items-center gap-2"
				>
					Login <Login />
				</a>
			) : (
				<form id="logoutForm" class="inline">
					<CSRFToken />
					<button
						type="submit"
						class="bg-red-600 text-white px-6 py-3 rounded hover:bg-red-700 transition duration-200 font-bold flex items-center gap-2 "
					>
						Logout <Logout />
					</button>
				</form>
			)
		}
	</div>
</Layout>
